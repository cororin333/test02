/* base */
:root{
  --bg:#cfe9ff;
  --card:#ffffff;
  --card2:#f6f7f9;
  --text:#111;
  --muted:#666;
  --err:#d10000;
  --ok:#0a7a2f;
  --cpu:#4C4C4C;
  --radius:18px;
  --shadow:0 8px 24px rgba(0,0,0,.08);

  /* フォント：タイトル/項目名以外は細い */
  --fontHead: "BIZ UDPGothic","BIZ UDPゴシック",system-ui,-apple-system,"Segoe UI",sans-serif;
  --fontThin: system-ui,-apple-system,"Segoe UI",sans-serif;

  /* 固定セル（全形式同一） */
  --tagw: 56px;
  --tagh: 22px;

  /* 罫線：外枠は強、内部は控えめ */
  --bOuter: 2px;
  --bMid: 1px;
  --bThin: 1px;
}

html,body{height:100%;}
body{
  margin:0;
  font-family:var(--fontThin);
  font-size:14px;
  color:var(--text);
  background:
    linear-gradient(180deg, #68b7ff 0%, #9ed5ff 220px, #e8f4ff 221px, #e8f4ff 100%);
}

#app{
  width:900px;
  margin:20px auto 40px;
}

.header{ margin-bottom:12px; }

.titleRow{
  background:#f04b36;
  color:#fff;
  border-radius:28px;
  padding:18px 20px;
  box-shadow:var(--shadow);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.title{ margin:0; font-family:var(--fontHead); font-size:40px; letter-spacing:.5px; }
.pill{
  border:0; border-radius:999px;
  padding:10px 16px;
  background:#fff; color:#f04b36;
  font-weight:700; cursor:pointer;
  font-family:var(--fontHead);
}
.pill:active{transform:scale(.98);}

.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px 16px 16px;
  margin:14px 0;
}

.cardHead{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; margin-bottom:10px;
}
.cardTitle{
  background:#111; color:#fff;
  font-family:var(--fontHead);
  font-weight:800;
  padding:6px 10px;
  border-radius:6px;
}
.cardTitleRow{ display:flex; align-items:center; gap:10px; }
.cardActions{ display:flex; align-items:center; gap:10px; }

.tagNote{
  font-family:var(--fontThin);
  font-size:11px;
  font-weight:500;
  color:#000;
  margin-left:8px;
}

.btn{
  border:1px solid #000;
  background:#fff;
  border-radius:10px;
  padding:6px 12px;
  cursor:pointer;
  font-weight:700;
  font-family:var(--fontHead);
}
.btn:active{transform:scale(.98);}

.errInline{
  font-size:11px;
  color:var(--err);
  font-weight:800;
  min-height:14px;
  font-family:var(--fontThin);
}

/* rule */
.ruleGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}
.ruleCol{
  background:var(--card2);
  border-radius:12px;
  padding:10px 12px;
}
.ruleLine{
  display:flex;
  align-items:center;
  gap:10px;
  margin:6px 0;
  flex-wrap:wrap;
}
.label{
  display:inline-block;
  min-width:74px;
  background:#d8efff;
  border-radius:6px;
  padding:4px 8px;
  font-weight:800;
  font-family:var(--fontHead);
}
.radio{ display:inline-flex; align-items:center; gap:6px; }
.sel{
  border:1px solid #bbb;
  border-radius:8px;
  padding:6px 10px;
  background:#fff;
  font-family:var(--fontThin);
}
.inp{
  border:1px solid #bbb;
  border-radius:8px;
  padding:6px 10px;
  background:#fff;
  font-family:var(--fontThin);
}
.inp.small{width:70px;}
.cpuBox{display:flex; gap:12px; align-items:center;}

/* タグ設定：横スク禁止（重要） */
.tagWrap{ display:flex; gap:18px; align-items:flex-start; }
.tagTableWrap{
  flex:1;
  overflow-x:hidden;
  padding-bottom:2px;
}

/* タグ設定テーブル群（1段/2段） */
.tagTables{
  display:flex;
  flex-direction:column;
  gap:8px;
}

/* タグ設定表：角丸、固定幅（伸びない） */
.sheet{
  border-collapse:separate;
  border-spacing:0;
  background:#fff;
  table-layout:fixed;
  width:max-content; /* 減っても拡大しない */
  border:var(--bOuter) solid #000;
  border-radius:12px;
  overflow:hidden;
}
.sheet th, .sheet td{
  border-right:var(--bThin) solid #333;
  border-bottom:var(--bThin) solid #333;
  padding:0;
  height:var(--tagh);
  width:var(--tagw);
  text-align:center;
  vertical-align:middle;
  overflow:hidden;
}
.sheet tr:last-child th, .sheet tr:last-child td{ border-bottom:0; }
.sheet th:last-child, .sheet td:last-child{ border-right:0; }

.sheet .rowHead{
  width:64px;
  background:#fff;
  font-weight:900;
  font-family:var(--fontHead);
}

.cellInp{
  width:100%; height:100%;
  border:0; margin:0;
  font:inherit;
  text-align:center;
  background:transparent;
  outline:none;
  font-family:var(--fontThin);
}
.cellInp.smalltxt{font-size:13px;}
.colorSel{
  width:100%; height:100%;
  border:0;
  background:transparent; /* セルを塗らない */
  font:inherit;
  outline:none;
  appearance:auto;
  cursor:pointer;
  font-family:var(--fontThin);
}

/* 順位入力見本 */
.pinRow{ display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap; }
.pinPreview{ display:flex; gap:6px; align-items:flex-start; flex-wrap:wrap; }

/* バッジ（高さ狭める） */
.badge{
  width:var(--tagw);
  border:var(--bThin) solid #333;
  border-radius:8px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.badgeTop{
  height:var(--tagh);
  padding:0 4px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-family:var(--fontThin);
}
.badgeBot{
  height:var(--tagh);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  background:#fff; /* キーは色を塗らない */
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-family:var(--fontThin);
}
.cpuSpacer{ width:18px; } /* gap=6px の3倍 */

/* 順位入力 */
.smallLine{ font-size:11px; margin:8px 0 10px; color:#000; font-family:var(--fontThin); }

/* 順位入力だけ横スク可（重要） */
.rankWrap{
  overflow-x:auto;
  padding-bottom:2px;
}

/* 順位表：角丸・外枠強、内部控えめ */
.rankTable{
  border-collapse:separate;
  border-spacing:0;
  background:#fff;
  table-layout:fixed;
  width:max-content;
  border:var(--bOuter) solid #000;
  border-radius:12px;
  overflow:hidden;
}

.rankTable th, .rankTable td{
  padding:0;
  width:var(--tagw);
  height:var(--tagh);
  text-align:center;
  vertical-align:middle;
  font-family:var(--fontThin);
}

/* 共通セル線（薄め） */
.rankCellTd{
  border-right:var(--bThin) solid #333;
  border-bottom:var(--bThin) dotted #666;
}
.rankTable tr:last-child td.rankCellTd{ border-bottom:0; }
.rankCellTd:last-child{ border-right:0; }

/* ヘッダーは強め */
.rankHeadTd{
  border-right:var(--bThin) solid #333;
  border-bottom:var(--bOuter) solid #000;
  font-weight:900;
  font-family:var(--fontHead);
}
.rankHeadTd:last-child{ border-right:0; }

/* 得点／順位 列（濃いグレー） */
.srCol{
  width:52px;
  background:#cfcfcf;
  font-weight:900;
  font-family:var(--fontHead);
  border-right:var(--bOuter) solid #000;
}
.srHead{
  width:52px;
  background:#cfcfcf;
  border-right:var(--bOuter) solid #000;
}

/* 8レース区切り（点線） */
.raceSplit{
  border-right:var(--bThin) dotted #666 !important;
}

/* 24人制の12位と13位の区切り（太線） */
.sepTop{
  border-top:var(--bOuter) solid #000 !important;
}

/* 入力セル：表示オーバーレイ */
.rankCell{
  position:relative;
  width:100%;
  height:100%;
}
.rankKey{
  width:100%;
  height:100%;
  border:0;
  margin:0;
  background:transparent;
  outline:none;
  color:transparent;      /* キー文字は見せない */
  caret-color:#000;       /* カーソルは見える */
  font:inherit;
  text-align:center;
  font-family:var(--fontThin);
}
.rankDisp{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  padding:0 2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  pointer-events:none;
  font-family:var(--fontThin);
}

/* コース名 */
.courseInp{
  width:100%; height:100%;
  border:0; margin:0;
  padding:0 6px;
  font:inherit;
  text-align:left;
  outline:none;
  background:transparent;
  color:#000;
  font-family:var(--fontThin);
}

/* 入力ミス・ロック：枠不要 */
.missTd, .lockTd{
  border:0 !important;
  background:transparent !important;
  height:18px;
}
.missMsg{
  font-size:11px;
  color:var(--err);
  font-weight:900;
  font-family:var(--fontThin);
}
.lockBtn{
  width:100%; height:100%;
  border:0;
  background:transparent;
  cursor:pointer;
  font-size:16px;
}
.lockBtn[disabled]{cursor:not-allowed; opacity:.4;}

/* 結果表示：横スクなし・折り返し */
.copyLine{margin:8px 0;}
.outLine{
  min-height:22px;
  font-size:14px;
  padding:6px 8px;
  background:#fff;
  border:1px solid #bbb;
  border-radius:8px;
  font-family:var(--fontThin);
}
.outWrap{
  white-space:normal;
  overflow:hidden;
  word-break:break-word;
}

.optionRow{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
  margin:10px 0;
  font-family:var(--fontThin);
}
.optTitle{
  background:#d8efff;
  border-radius:6px;
  padding:4px 8px;
  font-weight:900;
  min-width:92px;
  font-family:var(--fontHead);
}
.chk{display:inline-flex; align-items:center; gap:6px;}
.chk.small{font-size:11px;}
.divider{
  height:2px;
  background:linear-gradient(90deg, #000 0%, #000 60%, transparent 60%);
  opacity:.25;
  margin:10px 0;
}
.logBlock{margin-top:8px;}
.logTitle{
  background:#e6e6e6;
  display:inline-block;
  padding:4px 8px;
  border-radius:6px;
  font-weight:900;
  font-family:var(--fontHead);
}
.log{
  font-size:11px;
  margin-top:6px;
  min-height:18px;
  color:#000;
  white-space:pre-wrap;
  font-family:var(--fontThin);
}
.certText{font-size:11px; font-weight:900; color:#000; font-family:var(--fontThin);}
.copyFailMsg{ font-size:11px; font-weight:900; color:var(--err); font-family:var(--fontThin); }

/* pinBar */
.pinBar{
  position:fixed;
  top:0; left:0; right:0;
  background:rgba(0,0,0,.65);
  padding:5px 0;
  z-index:50;
}
.pinBarInner{
  width:900px;
  margin:0 auto;
  background:#fff;
  border-radius:16px;
  padding:6px 8px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}
.pinBarContent{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:flex-start;
  overflow:hidden;
}
.pinClose{
  border:0;
  background:#ff6a6a;
  color:#fff;
  width:34px;
  height:34px;
  border-radius:999px;
  font-size:18px;
  cursor:pointer;
  font-weight:900;
  font-family:var(--fontHead);
}
.hidden{display:none !important;}

.modal{ position:fixed; inset:0; z-index:60; }
.modalBack{ position:absolute; inset:0; background:rgba(0,0,0,.4); }
.modalBox{
  position:relative;
  width:800px;
  margin:80px auto 0;
  background:#fff;
  border-radius:18px;
  box-shadow:var(--shadow);
  overflow:hidden;
  transform:scale(.98);
}
.modalHead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  background:#f04b36;
  color:#fff;
}
.modalTitle{font-weight:900; font-family:var(--fontHead);}
.modalBody{ max-height:60vh; overflow:auto; padding:12px; }
.specText{font-size:12px; color:#000; font-family:var(--fontThin);}
